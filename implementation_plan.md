# Antigravity "Local Hands" Staging Dock - Implementation Plan

## Overview
A local web application providing a safe, high-aesthetic interface for executing code and commands generated by external LLMs (ChatGPT, Claude, Gemini).

**Philosophy**: "Brains in the Cloud, Hands on the Ground."
**Style**: Glassmorphism, Dark Mode, Futuristic HUD.

## Architecture
- **Frontend**: React (Vite)
- **Backend**: Node.js (Express) - *Required for file system access and command execution*
- **Styling**: Vanilla CSS (CSS Modules or standard CSS) with variables for Glassmorphism.

## Features

### 1. The Dock (Main UI)
- **Status HUD**: System stats (Node version, Current Work dir).
- **Paste Deck**: Large, glowing drop-zone/textarea for pasting LLM responses.
- **Smart Parse**: Automatically identifies:
    - Code Blocks (File paths, content)
    - Terminal Commands (`npm...`, `git...`)
    - Plain Text Instructions

### 2. Action Cards
- **File Card**: Shows filename, diff preview, and "Write" toggle.
- **Command Card**: Shows command, safety rating (Safe/Risk), and "Run" button.
- **Risk Indicator**: Red/Yellow/Green border based on operation safety (e.g., `rm -rf` = Red).

### 3. Execution Engine (Backend)
- `POST /api/execute`: Handles the actual shell execution.
- `POST /api/write`: Handles file writing.
- **Safety Middleware**: Checks against `user_rules` (from `GEMINI.md`) before executing.

### 4. API & Config (New)
- **Settings Panel**: Input fields for Gemini/Groq API keys.
- **"Refine" Feature**: detailed mode to re-prompt a local/free LLM to fix syntax errors or adjust paths before execution.

## Step-by-Step Implementation

1.  **Project Init**: Setup Vite (Frontend) and Express (Backend).
2.  **Backend Core**: Create `server.js` with `exec` and `fs` capabilities.
3.  **Frontend Layout**: Create the Glassmorphic container and layout.
4.  **Parser Logic**: a regex/heuristic engine to split LLM markdown into structured JSON objects.
5.  **Integration**: Connect Frontend to Backend.
6.  **Testing**: Verify "Test Execution" flows.

## User Provided Data
- We have the API Key retrieval guide. We will add a "configuration" modal to store these keys securely locally (e.g., `.env` file managed by the app).
