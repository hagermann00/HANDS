<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hands Protocol â€“ Multiâ€‘Agent Orchestrator</title>
  <meta name="description"
    content="A web interface that routes LLM directives to Antigravity agents using modular instruction templates." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <main class="container">

    <!-- HERO -->
    <section class="hero">
      <h1>ğŸ–ï¸ Hands Protocol</h1>
      <p class="subtitle">
        Brains in the Cloud â€¢ Hands on the Ground
      </p>

      <!-- LLM PRIMER QUICK COPY -->
      <div class="primer-copy-card">
        <div class="primer-info">
          <span class="primer-icon">ğŸ§ </span>
          <div class="primer-text">
            <strong>LLM Primer</strong>
            <span>Copy context for ChatGPT, Claude, or Gemini</span>
          </div>
        </div>
        <button id="copyPrimerBtn" class="copy-btn">ğŸ“‹ Copy to Clipboard</button>
      </div>
      <p id="copyStatus" class="copy-status hidden">âœ… Copied! Paste into any LLM.</p>

      <!-- ANTIGRAVITY PATH DISPLAY -->
      <div class="path-display">
        <div class="path-item">
          <span class="path-label">ğŸ¤– Antigravity:</span>
          <code class="path-value">C:\Users\dell3630\.gemini\antigravity\</code>
        </div>
        <div class="path-item">
          <span class="path-label">ğŸ“¡ Queue:</span>
          <code class="path-value">C:\Y-OS\Y-IT_ENGINES\HANDS\queue\</code>
        </div>
      </div>
    </section>

    <!-- ========================================== -->
    <!-- PRIMARY ACTION: UNIFIED DIRECTIVE INPUT   -->
    <!-- ========================================== -->
    <section class="unified-input">
      <h2>ğŸ“¥ Paste LLM Output Here</h2>
      <p class="hint">Accepts: Natural Language â€¢ JSON â€¢ YAML â€¢ Verbose Markdown â€” Auto-detected!</p>

      <div class="format-indicator">
        <span id="detectedFormat" class="format-badge">Waiting for input...</span>
      </div>

      <textarea id="unifiedInput" placeholder="Paste anything from an external LLM here:

â€¢ Natural language: 'Create an Express API with JWT auth'
â€¢ JSON directive: { &quot;type&quot;: &quot;directive&quot;, ... }
â€¢ YAML: type: directive ...
â€¢ Verbose Markdown: Full deployment guides with embedded directives

All formats will be parsed and shown for review before execution." rows="10"></textarea>

      <button id="parseInputBtn" class="primary parse-btn">ğŸ” Parse & Review</button>

      <!-- Plan Review Area (Hidden until parsed) -->
      <div id="planReview" class="plan-review hidden">
        <h3>ğŸ›¡ï¸ Execution Plan <span class="hard-stop-badge">HARD STOP</span></h3>

        <!-- Detected Format -->
        <div class="detected-format-display">
          <span class="label">Detected Format:</span>
          <span id="parsedFormatDisplay" class="format-value">Unknown</span>
        </div>

        <!-- Plain English Summary -->
        <div class="plain-english-summary">
          <h4>ğŸ“ What the LLM wants to do:</h4>
          <p id="planSummary" class="summary-text">"..."</p>
        </div>

        <div class="plan-meta">
          <span id="planRisk" class="risk-badge">SAFE</span>
          <span id="planId" class="plan-id"></span>
        </div>

        <div class="plan-section">
          <h4>ğŸ“‹ Steps to Execute:</h4>
          <div class="plan-steps" id="planSteps"></div>
        </div>

        <div class="plan-section">
          <h4>ğŸ“¦ Templates Being Applied:</h4>
          <div class="plan-templates" id="planTemplates"></div>
        </div>

        <div class="plan-section" id="warningsSection">
          <h4>âš ï¸ Warnings:</h4>
          <div class="plan-warnings" id="planWarnings"></div>
        </div>

        <div class="plan-actions-fire">
          <button id="fireToAntigravityBtn" class="go-btn">ğŸ”¥ GO MOTHERFUCKER</button>
          <button id="cancelPlanBtn" class="cancel-btn">âŒ Cancel</button>
        </div>

        <p class="fire-note">ğŸ‘† Clicking GO sends this directive to Antigravity for immediate execution.</p>

        <p id="queueStatus" class="queue-status hidden">âœ… Queued! Antigravity will execute shortly...</p>
      </div>
    </section>

    <!-- ========================================== -->
    <!-- QUEUE MONITOR: Real-time pending tasks    -->
    <!-- ========================================== -->
    <section class="queue-monitor">
      <h2>ğŸ“¡ Queue Monitor <span id="queueCount" class="queue-count">0</span></h2>
      <p class="hint">Real-time view of pending directives waiting for Antigravity execution.</p>

      <div id="queueList" class="queue-list">
        <p class="empty-queue">No pending tasks. Fire a directive above to queue it.</p>
      </div>

      <div class="queue-actions">
        <button id="refreshQueueBtn" class="secondary">ğŸ”„ Refresh</button>
        <button id="clearQueueBtn" class="danger">ğŸ—‘ï¸ Clear All</button>
      </div>
    </section>

    <!-- ========================================== -->
    <!-- TASK HISTORY: Completed tasks with results -->
    <!-- ========================================== -->
    <section class="task-history">
      <h2>ğŸ“œ Task History <span id="historyCount" class="history-count">0</span></h2>
      <p class="hint">Completed tasks with execution results.</p>

      <div id="historyList" class="history-list">
        <p class="empty-history">No completed tasks yet.</p>
      </div>

      <div class="history-actions">
        <button id="refreshHistoryBtn" class="secondary">ğŸ”„ Refresh</button>
        <button id="clearHistoryBtn" class="danger">ğŸ—‘ï¸ Clear History</button>
      </div>
    </section>

    <!-- ========================================== -->
    <!-- TEMPLATE LIBRARY: Reference (collapsible)  -->
    <!-- ========================================== -->
    <section class="template-browser collapsible">
      <h2 class="collapsible-header" onclick="toggleTemplateLibrary()">
        ğŸ“š Template Library
        <span class="collapse-icon" id="templateCollapseIcon">â–¼</span>
      </h2>

      <div id="templateContent" class="collapsible-content">
        <div class="library-controls">
          <select id="templateSelect" size="4"></select>
          <div class="btn-group">
            <button id="loadBtn" class="secondary">Load</button>
            <button id="combineBtn" class="secondary">Combine</button>
            <button id="quarantineBtn" class="danger">Quarantine</button>
          </div>
        </div>

        <textarea id="templatePreview" rows="10" readonly></textarea>

        <div class="edit-controls">
          <button id="editBtn" class="secondary">Edit</button>
          <button id="saveBtn" class="primary" hidden>Save</button>
        </div>

        <div class="meta">
          <label>Comment:</label>
          <input type="text" id="commentInput" placeholder="Add a noteâ€¦" />
          <label>Risk Score (0â€‘10):</label>
          <input type="number" id="scoreInput" min="0" max="10" />
          <button id="metaSaveBtn" class="primary">Save Meta</button>
        </div>
      </div>
    </section>

    <!-- OUTPUT AREA -->
    <section class="output-area" id="outputArea" hidden>
      <h2>Execution Summary</h2>
      <pre id="outputLog"></pre>
    </section>

    <div id="spinnerOverlay" class="spinner-overlay hidden">
      <div class="spinner"></div>
      <p id="spinnerMessage"></p>
    </div>
  </main>

  <script src="app.js"></script>
  <script>
    // Toggle template library collapse
    function toggleTemplateLibrary() {
      const content = document.getElementById('templateContent');
      const icon = document.getElementById('templateCollapseIcon');
      if (content.style.display === 'none') {
        content.style.display = 'block';
        icon.textContent = 'â–¼';
      } else {
        content.style.display = 'none';
        icon.textContent = 'â–¶';
      }
    }
    // Start collapsed
    document.addEventListener('DOMContentLoaded', () => {
      const content = document.getElementById('templateContent');
      const icon = document.getElementById('templateCollapseIcon');
      if (content) {
        content.style.display = 'none';
        icon.textContent = 'â–¶';
      }
    });
  </script>
</body>

</html>